<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>Ø­Ø³Ø§Ø¨ÙŠ - Free Fire</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body {
  margin:0; font-family:'Tajawal', sans-serif; background:#111; color:#fff;
}

/* Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù‚Ø³Ù… */
#account h1 {
  text-align:center;
  font-size:2.5em;
  color:#ff4d4d;
  text-shadow:0 0 15px #ff1a1a,0 0 30px #ff4d4d;
  margin-bottom:30px;
}

/* ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… */
.user-box {
  display:flex;
  align-items:center;
  gap:20px;
  background:linear-gradient(135deg,#222,#333);
  padding:20px;
  border-radius:20px;
  box-shadow:0 0 30px rgba(255,0,0,0.4);
  transition: transform 0.3s, box-shadow 0.3s;
}
.user-box:hover {
  transform: scale(1.03);
  box-shadow:0 0 50px rgba(255,0,0,0.6);
}
.user-box img {
  width:100px;
  height:100px;
  border-radius:50%;
  border:3px solid #ff4d4d;
  box-shadow:0 0 20px rgba(255,77,77,0.6);
  transition: transform 0.3s, box-shadow 0.3s;
}
.user-box img:hover {
  transform: scale(1.1);
  box-shadow:0 0 35px rgba(255,77,77,0.8);
}
.user-info {
  display:flex; flex-direction:column; gap:5px;
}
.user-info span {
  font-size:1.2em;
  color:#fff;
}
.user-info .points {
  background:linear-gradient(90deg,#ff4d4d,#ff1a1a);
  padding:5px 10px;
  border-radius:10px;
  display:inline-block;
  box-shadow:0 0 10px rgba(255,0,0,0.5);
}

/* Ø­Ù‚Ù„ Ø­ÙØ¸ Ø§Ù„Ø¢ÙŠØ¯ÙŠ */
#user-id {
  width:60%;
  padding:10px;
  border-radius:15px;
  border:none;
  margin-top:10px;
  font-size:1em;
}
#save-id {
  padding:10px 20px;
  border:none;
  border-radius:15px;
  background:linear-gradient(90deg,#ff4d4d,#ff1a1a);
  color:#fff;
  cursor:pointer;
  font-weight:bold;
  margin-left:10px;
  box-shadow:0 0 15px rgba(255,77,77,0.6);
  transition: transform 0.3s, box-shadow 0.3s;
}
#save-id:hover {
  transform: scale(1.05);
  box-shadow:0 0 25px rgba(255,77,77,0.8);
}

/* Leaderboard */
#leaderboard {
  width:100%;
  border-collapse: separate;
  border-spacing:0 10px;
  margin-top:30px;
}
#leaderboard th, #leaderboard td {
  padding:10px;
  text-align:center;
}
#leaderboard tbody tr {
  background:linear-gradient(135deg,#222,#333);
  border-radius:15px;
  box-shadow:0 0 20px rgba(255,255,255,0.1);
  transition: transform 0.3s, box-shadow 0.3s;
}
#leaderboard tbody tr:hover {
  transform: scale(1.02);
  box-shadow:0 0 35px rgba(255,77,77,0.6);
}

/* Responsive */
@media(max-width:600px){
  #account h1 { font-size:2em; }
  .user-box { flex-direction:column; text-align:center; }
  #user-id { width:100%; margin-bottom:10px; }
}
</style>
</head>
<body>

<div id="account">
  <h1>ğŸ® Ø­Ø³Ø§Ø¨ÙŠ - Free Fire ğŸ®</h1>

  <div class="user-box">
    <img src="avatar.png" alt="Avatar">
    <div class="user-info">
      <span id="user-name">Ù„Ù… ØªÙ‚Ù… Ø¨ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ø¹Ø¯</span>
      <span class="points">Ù†Ù‚Ø§Ø·Ùƒ: <span id="user-points">0</span></span>
      <div>
        <input type="text" id="user-id" placeholder="Ø£Ø¯Ø®Ù„ Ø¢ÙŠØ¯ÙŠ Free Fire">
        <button id="save-id">Ø­ÙØ¸ Ø§Ù„Ø¢ÙŠØ¯ÙŠ</button>
      </div>
      <button id="login-btn">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ø­Ø³Ø§Ø¨ Google</button>
      <button id="logout-btn" style="display:none;">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</button>
    </div>
  </div>

  <h2 style="margin-top:40px; text-align:center; color:#ff4d4d;">ğŸ† Ø£ÙØ¶Ù„ Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ†</h2>
  <table id="leaderboard">
    <thead>
      <tr><th>#</th><th>Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</th><th>Ø§Ù„Ù†Ù‚Ø§Ø·</th></tr>
    </thead>
    <tbody id="leaderboard-body">
      <tr><td colspan="3" style="text-align:center; padding:10px;">Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ø³ØªØ®Ø¯Ù…ÙˆÙ† Ø¨Ø¹Ø¯</td></tr>
    </tbody>
  </table>

  <div id="redeem" style="margin-top:40px;">
    <h2 style="text-align:center; color:#ff4d4d;">ğŸ’ Ø·Ù„Ø¨ Ø´Ø­Ù† Ø§Ù„Ø¬ÙˆØ§Ù‡Ø±</h2>
    <div id="enter-id-redeem">
      <p>Ø£Ø¯Ø®Ù„ Ø§Ù„Ø¢ÙŠØ¯ÙŠ Ø£ÙˆÙ„Ø§Ù‹:</p>
      <input type="text" id="redeem-user-id" placeholder="Ø¢ÙŠØ¯ÙŠ Free Fire">
      <button id="save-redeem-id">âœ… Ø­ÙØ¸ Ø§Ù„Ø¢ÙŠØ¯ÙŠ</button>
    </div>
    <div id="redeem-options" style="display:none; margin-top:10px;">
      <p>Ø§Ø®ØªØ± ÙƒÙ…ÙŠØ© Ø§Ù„Ø¬ÙˆØ§Ù‡Ø±:</p>
      <button onclick="redeem(1500,100)">âœ… 100 Ø¬ÙˆÙ‡Ø±Ø© - 1500 Ù†Ù‚Ø·Ø©</button>
      <button onclick="redeem(3500,200)">âœ… 200 Ø¬ÙˆÙ‡Ø±Ø© - 3500 Ù†Ù‚Ø·Ø©</button>
      <button onclick="redeem(8000,500)">âœ… 500 Ø¬ÙˆÙ‡Ø±Ø© - 8000 Ù†Ù‚Ø·Ø©</button>
    </div>
  </div>

</div>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
<script>
const firebaseConfig = {
    apiKey: "AIzaSyBSocmPYyRrVPFQIlk8UkHWxvPNIe1B1-A",
    authDomain: "freefirerewardsdz-69572.firebaseapp.com",
    databaseURL: "https://freefirerewardsdz-69572-default-rtdb.firebaseio.com",
    projectId: "freefirerewardsdz-69572",
    storageBucket: "freefirerewardsdz-69572.appspot.com",
    messagingSenderId: "145782934523",
    appId: "1:145782934523:web:76a2f7c4d2e37f94d6595e"
};
firebase.initializeApp(firebaseConfig);
const auth=firebase.auth();
const db=firebase.database();
let currentUserUid=null;

// Ø¹Ø±Ø¶ Leaderboard
function updateLeaderboard(){
    const leaderboardRef=db.ref('users');
    leaderboardRef.orderByChild('points').limitToLast(10).on('value',snapshot=>{
        const tbody=document.getElementById('leaderboard-body');
        tbody.innerHTML='';
        if(!snapshot.exists()){ 
            tbody.innerHTML='<tr><td colspan="3" style="text-align:center; padding:10px;">Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ø³ØªØ®Ø¯Ù…ÙˆÙ† Ø¨Ø¹Ø¯</td></tr>';
            return;
        }
        const users=[];
        snapshot.forEach(child=>{ users.push(child.val()); });
        users.sort((a,b)=>(b.points||0)-(a.points||0));
        users.forEach((user,index)=>{
            const row=`<tr>
                <td>${index+1}</td>
                <td>${user.userId||'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}</td>
                <td>${user.points||0}</td>
            </tr>`;
            tbody.innerHTML+=row;
        });
    });
}

// ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙˆØ§Ù„Ø®Ø±ÙˆØ¬ ÙˆØ­ÙØ¸ Ø¢ÙŠØ¯ÙŠ
window.addEventListener('load',()=>{
    auth.onAuthStateChanged(user=>{
        if(user){
            currentUserUid=user.uid;
            document.getElementById('user-name').innerText=`Ù…Ø±Ø­Ø¨Ù‹Ø§ ${user.displayName}`;
            document.getElementById('login-btn').style.display='none';
            document.getElementById('logout-btn').style.display='inline-block';

            const userRef=db.ref('users/'+currentUserUid);
            userRef.once('value').then(snap=>{
                if(!snap.exists()){
                    userRef.set({points:0,userId:""}).then(()=>{
                        document.getElementById('user-points').innerText="0";
                        document.getElementById('user-id').value="";
                    });
                } else {
                    const data=snap.val();
                    document.getElementById('user-points').innerText=data?.points||"0";
                    document.getElementById('user-id').value=data?.userId||"";
                }
            });

            updateLeaderboard();

        } else {
            currentUserUid=null;
            document.getElementById('user-name').innerText='Ù„Ù… ØªÙ‚Ù… Ø¨ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ø¹Ø¯';
            document.getElementById('login-btn').style.display='inline-block';
            document.getElementById('logout-btn').style.display='none';
            document.getElementById('user-points').innerText="0";
            document.getElementById('user-id').value="";
            document.getElementById('leaderboard-body').innerHTML='<tr><td colspan="3" style="text-align:center; padding:10px;">Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ø³ØªØ®Ø¯Ù…ÙˆÙ† Ø¨Ø¹Ø¯</td></tr>';
        }
    });

    document.getElementById('login-btn').addEventListener('click',()=>{
        const provider=new firebase.auth.GoogleAuthProvider();
        auth.signInWithPopup(provider);
    });

    document.getElementById('logout-btn').addEventListener('click',()=>{ auth.signOut(); });

    document.getElementById('save-id').addEventListener('click',()=>{
        const id=document.getElementById('user-id').value.trim();
        if(!id||!currentUserUid) return alert('ØªØ£ÙƒØ¯ Ù…Ù† ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙˆÙƒØªØ§Ø¨Ø© Ø§Ù„Ø¢ÙŠØ¯ÙŠ');
        db.ref('users/'+currentUserUid).update({userId:id}).then(()=>alert('âœ… ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø¢ÙŠØ¯ÙŠ Ø¨Ù†Ø¬Ø§Ø­'));
        updateLeaderboard();
    });

    document.getElementById('save-redeem-id').addEventListener('click',()=>{
        const redeemId=document.getElementById('redeem-user-id').value.trim();
        if(!redeemId) return alert('âš ï¸ Ø£Ø¯Ø®Ù„ Ø§Ù„Ø¢ÙŠØ¯ÙŠ Ø£ÙˆÙ„Ø§Ù‹');
        if(!currentUserUid) return alert('âš ï¸ Ø³Ø¬Ù„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø£ÙˆÙ„Ø§Ù‹');
        db.ref('users/'+currentUserUid).update({userId:redeemId});
        document.getElementById('enter-id-redeem').style.display='none';
        document.getElementById('redeem-options').style.display='block';
    });

});

// Ø¯Ø§Ù„Ø© Ø´Ø­Ù† Ø§Ù„Ø¬ÙˆØ§Ù‡Ø± + Ø¥Ø´Ø¹Ø§Ø± Ø§Ù„ØªÙ„ÙŠØ¬Ø±Ø§Ù…
function redeem(pointsRequired,gems){
    if(!currentUserUid) return alert('Ø³Ø¬Ù„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø£ÙˆÙ„Ø§Ù‹');
    db.ref('users/'+currentUserUid).once('value').then(snap=>{
        const data=snap.val();
        if(!data) return alert('âš ï¸ Ù„Ù… ÙŠØªÙ… Ø­ÙØ¸ Ø¨ÙŠØ§Ù†Ø§ØªÙƒ Ø¨Ø¹Ø¯');
        if((data.points||0)<pointsRequired) return alert('âŒ Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ Ù†Ù‚Ø§Ø· ÙƒØ§ÙÙŠØ© Ù„Ù‡Ø°Ø§ Ø§Ù„Ø´Ø­Ù†.');
        db.ref('users/'+currentUserUid).update({points:data.points-pointsRequired});

        // Ø¥Ø´Ø¹Ø§Ø± Ø§Ù„ØªÙ„ÙŠØ¬Ø±Ø§Ù…
        const botToken="8096326997:AAE_UuRKi3gnCdOfXKu76X4D4cPUuXSpPbo";
        const chatId="6285856969";
        const message=`ğŸ“© Ø·Ù„Ø¨ Ø´Ø­Ù† Ø¬Ø¯ÙŠØ¯\nğŸ’ Ø§Ù„Ø¬ÙˆØ§Ù‡Ø±: ${gems}\nğŸ†” Ø§Ù„Ø¢ÙŠØ¯ÙŠ: ${data.userId||'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}`;
        fetch(`https://api.telegram.org/bot${botToken}/sendMessage?chat_id=${chatId}&text=${encodeURIComponent(message)}`)
          .then(()=>alert('âœ… ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨ Ø§Ù„Ø´Ø­Ù†'))
          .catch(()=>alert('âŒ ÙØ´Ù„ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨'));
    });
}
</script>
</body>
</html>
